if(!window.LChart){throw new Error('未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n'+'Not loaded loongchart.core.js which must be loaded before other LChart\'s js.');}else{LChart.Const.Skins.BlackAndWhite.RangeArea={NodeLineColor:'#ffffff',NodeFillColor:'#000000',AlignlineLineColor:null}}LChart.RangeArea=LChart.getCore().__extends({GraphType:'RangeArea'});LChart.RangeArea._spreadSkin=function(a,b){a.node={};a.alignline={};a.node.linecolor=b.NodeLineColor||null;a.node.fillcolor=b.NodeFillColor||null;a.alignline.linecolor=b.AlignlineLineColor||null};LChart.RangeArea._getDefaultOptions=function(h){var j=LChart.Methods.Extend(h,{invertAxis:false,area:{linecolors:null,linewidth:null,smoothline:false,fillcolors:null},labelAxis:{valueType:null,content:function(a){if(this.valueType=='d'){return a.format('yyyy-MM-dd')}else if(this.valueType=='t'){return a.format('MM-dd hh:mm')}else if(this.valueType=='m'){return a.format('hh:mm:ss.S')}else{return a.toString()}},minvalue:null,maxvalue:null,interval:null,sort:true},node:{show:true,nodetype:null,linecolor:null,linewidth:null,length:null,fillcolor:null},tip:{merge:true,spotdistance:10,content:function(d,e){var f=function(a,b){if(!b){return''}var c=a.toString();if(b=='d'){c=a.format('yyyy-MM-dd')}else if(b=='t'){c=a.format('MM-dd hh:mm')}else if(b=='m'){c=a.format('hh:mm:ss.S')}return c};if(e){var g='<div>';for(var i=0,dataitem;dataitem=d[i];i++){if(i==0){g+=(dataitem.min.llabel!=null?dataitem.min.llabel:f(dataitem.min.lvalue,this.labelAxis.valueType))+'<br/>'}g+='max, '+(dataitem.max.text?dataitem.max.text+' : ':'')+f(dataitem.max.vvalue,this.valueType||'n')+'<br/>';g+='min, '+(dataitem.min.text?dataitem.min.text+' : ':'')+f(dataitem.min.vvalue,this.valueType||'n')+'<br/>'}g+='</div>';return g}else{return'<div>'+(d.issmall?'min, ':'max, ')+(d.llabel!=null?d.llabel:f(d.lvalue,this.labelAxis.valueType))+'<br/>'+(d.text?d.text+" : ":'')+f(d.vvalue,this.valueType||'n')+'</div>'}}},alignline:{verticalline:true,horizontalline:true,linecolor:null},scale:{drawvertical:true}});return j};LChart.RangeArea._getCheckOptions=function(){return{__top:[['invertAxis','b']],area:[['linecolors','ca'],['linewidth','n'],['fillcolors','ca']],labelAxis:[['valueType','s'],['content','f'],['interval','n'],['sort','b']],node:[['show','b'],['nodetype','s'],['linecolor','c'],['linewidth','n'],['length','n'],['fillcolor','c']],tip:[['merge','b'],['spotdistance','n']],alignline:[['verticalline','b'],['horizontalline','b'],['linecolor','c']],scale:[['drawvertical','b']]}};LChart.RangeArea._drawgraphic=function(J,K,L,M){var N=M.labelAxis.valueType;if(N=='p'){throw new Error(J._messages.WrongParam+J._messages.LabelAxisValueTypeCannotBePercent);}if(M.valueType=='p'){throw new Error(J._messages.WrongParam+J._messages.ValueTypeMustNotBePercent);}J._configs.recreateAssists=true;var O=M.invertAxis;var P=K==J.ID;if(P){J._configs.invertAxis=O;J._configs.valueAxiaDataIsRange=true}var Q=J._formatAxisData();if(Q.tuftCount<2){throw new Error(J._messages.WrongData+J._messages.NeedLeastTwoPoints);}var R=J._calculateOutersValid();var S=J._computeAxis(R);var T=J._getDrawableCoordinate();var U=LChart.Methods.IsNumber(M.tip.spotdistance)&&M.tip.spotdistance>0?M.tip.spotdistance:10;var V=M.alignline.linecolor||LChart.Const.Defaults.AlignLineColor;var W=(M.area.fillcolors&&M.area.fillcolors.length>0?M.area.fillcolors:null)||LChart.Const.Defaults.TransparentColors;var X=(M.area.linecolors&&M.area.linecolors.length>0?M.area.linecolors:null)||LChart.Const.Defaults.FillColors;if(P){J.coordinates.draw=T;J._configs.legendColors=X}var Y=J._configs.specificConfig[K];Y.mergeTips=[];Y.loc=-1;if(!J.coordinates.rangearea){J.coordinates.rangearea={}}J.coordinates.rangearea[K]={nodes:[]};J.shapes[K]={nodes:[]};var Z=M.tip.merge;var ba={};var bb=(O?S.maxX-S.minX:S.maxY-S.minY);var bc=(O?S.maxY-S.minY:S.maxX-S.minX);var bd=M.node.length||LChart.Methods.CapValue(bc/100,10,6);var be=M.area.smoothline;var bf=be?J.DrawFigures.createSmoothLine:J.DrawFigures.createPointsLine;var bg=function(d,f,g,h,i){this.index=d;this.centerX=f;this.centerY=g;this.isHovered=false;this.nodelength=h;this.data=i;this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(M.click||null);if(a){a(this.data,e)}};if(M.tip.show&&typeof M.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.centerX+bd+5;var b=this.centerY-bd-10;this.tip=J._createTip(M.tip.content.call(M,this.data,false),a,b);if(this.centerX+this.tip.clientWidth>S.maxX){J._changeTip(this.tip,a-5-bd-this.tip.clientWidth)}var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};var bh=function(x,y,a,b){var c=M.node;if(c.show){var d=b.nodelength||bd;var e=b.nodetype||c.nodetype||'c';var f=b.nodelinecolor||c.linecolor||a;var g=b.nodelinewidth||c.linewidth;var h=b.nodefillcolor||c.fillcolor||a;J.DrawFigures.createPointElement(e,x,y,d,h,true,f,g,true,true)}};var bi=function(a,b,c){var d=a.__copy();for(var i=b.length-1;i>=0;i--){d.push(b[i])}J.DrawFigures.createCloseFigure(d,c,0,null,be,O)};var bj=function(m,n){var o=function(a){var b=(M.animation?m:1)*bb*J._getFormatDiff(Q.vValueType,Q.vMinValue,a)/J._getFormatDiff(Q.vValueType,Q.vMinValue,Q.vMaxValue);return b};var p=function(a){if(N){return bc*J._getFormatDiff(Q.lValueType,Q.lMinValue,a)/J._getFormatDiff(Q.lValueType,Q.lMinValue,Q.lMaxValue)}else{if(Q.multiple){return bc*a/(Q.tuftCount-1)}else{return bc*a/(L.length-1)}}};var q=function(a,b,x,y,c,d,e,f,g,h,i,j){if(n>=1){var k={vvalue:d,lvalue:e,llabel:f,text:g,issmall:a};if(typeof h=='function'){k.click=h}if(typeof i=='function'){k.mouseover=i}if(typeof j=='function'){k.mouseleave=j}var l=new bg(b,x,y,c,k);J.shapes[K].nodes.push(l);J.coordinates.rangearea[K].nodes[b]={isSmall:a,centerX:x,centerY:y,length:c}}};var r,vvalue,center1,center2Small,center2Big;if(Q.multiple){var s=[];var t=[];var u=[];for(var i=0,item;item=L[i];i++){var v=item.linewidth||M.area.linewidth||LChart.Const.Defaults.LineWidth;var w=item.color||X[i%X.length];var z=item.fillcolor||W[i%W.length];var A=item.text||'';var B=item.value.length;var C=B/(Q.lLabels.length-1);for(var k=0;k<B;k++){subitem=item.value[k];r=N?subitem[0]:k;vvalue=N?subitem[1]:subitem;var D=vvalue[0];var E=vvalue[1];if(D>E){E=D;D=vvalue[1]}center1=(O?S.maxY-p(r):S.minX+p(r));center2Small=O?S.minX+o(D):S.maxY-o(D);center2Big=O?S.minX+o(E):S.maxY-o(E);s.push(O?[center2Small,center1]:[center1,center2Small]);t.push(O?[center2Big,center1]:[center1,center2Big]);var F=N?null:Q.lLabels[parseInt(k/C+0.5)];var G=i*B+k;q(true,G,O?center2Small:center1,O?center1:center2Small,item.nodelength||bd,D,r,F,A,item.click,item.mouseover,item.mouseleave);q(false,G,O?center2Big:center1,O?center1:center2Big,item.nodelength||bd,E,r,F,A,item.click,item.mouseover,item.mouseleave)}bi(s,t,z);var H={pointsSmall:s,pointsBig:t,fillcolor:z,linewidth:v,linecolor:w,nodetype:item.nodetype,nodelength:item.nodelength,nodelinecolor:item.nodelinecolor,nodelinewidth:item.nodelinewidth,nodefillcolor:item.nodefillcolor};u.push(H);if(n>=1){if(!ba.areainfos){ba.areainfos=[]}ba.areainfos[i]=H}s=[];t=[]}for(var i=0;i<u.length;i++){var s=u[i].pointsSmall;bf(s,u[i].linewidth,u[i].linecolor,O);for(var j=0;j<s.length;j++){var I=s[j];bh(I[0],I[1],u[i].linecolor,u[i])}var t=u[i].pointsBig;bf(t,u[i].linewidth,u[i].linecolor,O);for(var j=0;j<t.length;j++){var I=t[j];bh(I[0],I[1],u[i].linecolor,u[i])}}}else{var v=M.area.linewidth||LChart.Const.Defaults.LineWidth;var w=X[0];var z=W[0];var s=[];var t=[];var B=L.length;for(var i=0;i<B;i++){subitem=L[i];var A=subitem.text||'';r=N?subitem.value[0]:i;vvalue=N?subitem.value[1]:subitem.value;var D=vvalue[0];var E=vvalue[1];if(D>E){E=D;D=vvalue[1]}center1=O?S.maxY-p(r):S.minX+p(r);center2Small=O?S.minX+o(D):S.maxY-o(D);center2Big=O?S.minX+o(E):S.maxY-o(E);s.push(O?[center2Small,center1]:[center1,center2Small]);t.push(O?[center2Big,center1]:[center1,center2Big]);var F=N?null:Q.lLabels[i%Q.lLabels.length];q(true,i,O?center2Small:center1,O?center1:center2Small,subitem.nodelength||bd,D,r,F,A,subitem.click,subitem.mouseover,subitem.mouseleave);q(false,i,O?center2Big:center1,O?center1:center2Big,subitem.nodelength||bd,E,r,F,A,subitem.click,subitem.mouseover,subitem.mouseleave)}if(n>=1){ba.pointsSmall=s;ba.pointsBig=t;ba.linewidth=v;ba.linecolor=w;ba.fillcolor=z}bi(s,t,z);bf(s,v,w,O);for(var j=0;j<s.length;j++){var I=s[j];bh(I[0],I[1],w,L[j])}bf(t,v,w,O);for(var j=0;j<t.length;j++){var I=t[j];bh(I[0],I[1],w,L[j])}}};var bk=function(){var t=function(x,y){var a=null;for(var i=J.shapes[K].nodes.length-1;i>=0;i--){var b=J.shapes[K].nodes[i];if(Math.sqrt(Math.pow(x-b.centerX,2)+Math.pow(y-b.centerY,2))<=b.nodelength/2){a=b;break}}return a};var u=function(x,y){var c=[],loc=-1,meetlocs=[];var d=(O?y:x);if(y<=S.maxY&&y>=S.minY&&x>=S.minX&&x<=S.maxX){for(var i=0,shape;shape=J.shapes[K].nodes[i];i++){var e=O?shape.centerY:shape.centerX;if(Math.abs(e-d)<U){meetlocs.push(e)}}meetlocs.sort(function(a,b){if(Math.abs(a-d)<Math.abs(b-d)){return-1}else{return 1}});if(meetlocs.length>0){loc=meetlocs[0]}for(var i=0,shape;shape=J.shapes[K].nodes[i];i++){var e=O?shape.centerY:shape.centerX;if(Math.abs(e-loc)<0.00001){c.push(shape)}}}return{shapes:c,loc:loc}};var v=function(e){var e=window.event||e;var a=J._getMouseLoction(e);var b=t(a.X,a.Y);if(b){b.click(e)}};var w=function(e){var e=window.event||e;var a=J._getMouseLoction(e);var b=t(a.X,a.Y);if(b){J._configs.cursorPointer=true}if(Y.currentMouseShape!=b){var c=Y.currentMouseShape;if(c){var d=typeof c.data.mouseleave=='function'?c.data.mouseleave:(M.mouseleave||null);if(d){d(c.data,e)}}Y.currentMouseShape=b;for(var i=0,c;c=J.shapes[K].nodes[i];i++){if(c!=b&&c.isHovered){c.isHovered=false}}if(b){b.isHovered=true;if(M.alignline.verticalline||M.alignline.horizontalline){J.redrawAll()}if(M.alignline.verticalline){J.DrawFigures.createLine(b.centerX,S.minY,b.centerX,S.maxY+1,1,V)}if(M.alignline.horizontalline){J.DrawFigures.createLine(S.minX,b.centerY,S.maxX,b.centerY,1,V)}var f=typeof b.data.mouseover=='function'?b.data.mouseover:(M.mouseover||null);if(f){f(b.data,e)}}else{if(M.alignline.verticalline||M.alignline.horizontalline){J.redrawAll()}}}var g=u(a.X,a.Y);if(Y.loc!=g.loc){Y.loc=g.loc;if(O&&M.alignline.horizontalline||!O&&M.alignline.verticalline){J.redrawAll()}if(Z){for(var i=0;i<Y.mergeTips.length;i++){if(Y.mergeTips[i]){Y.mergeTips[i].style.display='none'}}}else{for(var i=0,c;c=J.shapes[K].nodes[i];i++){if(c.hideTip){c.hideTip()}}}if(g.shapes.length){if(!O&&M.alignline.verticalline){J.DrawFigures.createLine(g.loc,S.minY,g.loc,S.maxY+1,1,V)}if(O&&M.alignline.horizontalline){J.DrawFigures.createLine(S.minX,g.loc,S.maxX,g.loc,1,V)}if(Z){if(g.shapes[0].showTip){var h=Y.mergeTips[g.shapes[0].index];if(!h){var j=[];var k=0;var l=0;var m=-1;var n=[];for(var i=0,c;c=g.shapes[i];i++){var o=c.index;if(o!=m){m=o;n[o]=c.data}else{var p={};var q=c.data.vvalue>n[o].vvalue;p.max=q?c.data:n[o];p.min=q?n[o]:c.data;j.push(p)}l+=c.centerY;k+=c.centerX}var r=k/g.shapes.length+5;var s=l/g.shapes.length;h=J._createTip(M.tip.content.call(M,j,true),r,s);J._changeTip(h,null,s-h.clientHeight/2+10);if(r+h.clientWidth>S.maxX){J._changeTip(h,r-5-bd-h.clientWidth)}Y.mergeTips[g.shapes[0].index]=h}h.style.display='inline'}}else{for(var i=0,c;c=g.shapes[i];i++){if(c.showTip){c.showTip()}}}}}};J._addEventListener('click',v);J._addEventListener('mousemove',w)};var bl=function(){if(Q.multiple){var a=ba.areainfos;for(var i=0;i<a.length;i++){var b=a[i];bi(b.pointsSmall,b.pointsBig,b.fillcolor)}for(var i=0;i<a.length;i++){var b=a[i];bf(b.pointsSmall,b.linewidth,b.linecolor,O);bf(b.pointsBig,b.linewidth,b.linecolor,O);for(var j=0;j<b.pointsSmall.length;j++){bh(b.pointsSmall[j][0],b.pointsSmall[j][1],b.linecolor,b)}for(var j=0;j<b.pointsSmall.length;j++){bh(b.pointsBig[j][0],b.pointsBig[j][1],b.linecolor,b)}}}else{var c=ba.pointsSmall;var d=ba.pointsBig;bi(c,d,ba.fillcolor);bf(ba.pointsSmall,ba.linewidth,ba.linecolor,O);bf(ba.pointsBig,ba.linewidth,ba.linecolor,O);for(var j=0;j<ba.pointsSmall.length;j++){bh(ba.pointsSmall[j][0],ba.pointsSmall[j][1],ba.linecolor,L[j])}for(var j=0;j<ba.pointsBig.length;j++){bh(ba.pointsBig[j][0],ba.pointsBig[j][1],ba.linecolor,L[j])}}};return{drawSegments:bj,mouseEvents:bk,redraw:bl}};