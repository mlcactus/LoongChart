if(!window.LChart){throw new Error('未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n'+'Not loaded loongchart.core.js which must be loaded before other LChart\'s js.');}else{LChart.Const.Skins.BlackAndWhite.Radar={ScaleLineColor:null,StaffFontColor:null,StaffBackColor:'rgba(255,255,255,0.3)',RadarNodeLinecolors:['#ffffff'],LabelsFontColors:'#666666'}}LChart.Radar=LChart.getCore().__extends({GraphType:'Radar'});LChart.Radar._spreadSkin=function(a,b){a.scale={};a.staff={};a.radar={};a.labels={};a.scale.linecolor=b.ScaleLineColor||null;a.staff.fontcolor=b.StaffFontColor||null;a.staff.backcolor=b.StaffBackColor||null;a.radar.nodelinecolors=b.RadarNodeLinecolors||null;a.labels.fontcolors=b.LabelsFontColors||null};LChart.Radar._getDefaultOptions=function(c){var d=LChart.Methods.Extend(c,{offX:0,offY:0,radius:null,margin:null,startDirection:null,scale:{linewidth:0.5,minvalue:null,maxvalue:null,interval:null},staff:{show:true,content:function(a){return a.toString()},fontcolor:null,fontfamily:null,fontsize:null,fontweight:null,backcolor:'rgba(255,255,255,0.3)'},radar:{fillcolors:null,linecolors:null,nodefillcolors:null,nodelinecolors:['#ffffff'],linewidth:null,nodetype:null,nodelinewidth:1,nodelength:null},labels:{labels:null,fontcolors:null,fontweight:null,fontsize:null,fontfamily:null,showtips:true},tip:{content:function(a){var b=a.value.toString();return'<div>'+(a.text?a.text+'<br/>':'&nbsp;')+a.label+'：'+b+'&nbsp;</div>'}}});return d};LChart.Radar._getCheckOptions=function(){return{__top:[['offX','n'],['offX','n'],['radius','n'],['margin','n'],['startDirection','s']],scale:[['minvalue','n'],['maxvalue','n'],['interval','n']],staff:[['show','b'],['content','f'],['fontcolor','c'],['fontfamily','s'],['fontsize','n'],['fontweight','s'],['backcolor','c']],radar:[['fillcolors','ca'],['linecolors','ca'],['nodefillcolors','ca'],['nodelinecolors','ca'],['linewidth','n'],['nodetype','s'],['nodelinewidth','n'],['nodelength','n']],labels:[['labels','sa'],['fontcolors','ca'],['fontweight','s'],['fontsize','n'],['fontfamily','s'],['showtips','b']]}};LChart.Radar._drawgraphic=function(Q,R,S,T){var U=Q._computeSegmentTotal(S);var V=U.multiple;var W=Q._getComputed(0,'n',T.scale,U.minval,U.maxval,8);var X=Q._computeRadiusForPies(T);var Y=(T.radar.fillcolors&&T.radar.fillcolors.length>0?T.radar.fillcolors:null)||LChart.Const.Defaults.TransparentColors;var Z=(T.radar.linecolors&&T.radar.linecolors.length>0?T.radar.linecolors:null)||LChart.Const.Defaults.FillColors;var ba=(T.radar.nodefillcolors&&T.radar.nodefillcolors.length>0?T.radar.nodefillcolors:null)||Z;var bb=(T.radar.nodelinecolors&&T.radar.nodelinecolors.length>0?T.radar.nodelinecolors:null)||ba;var bc=T.labels.fontcolors&&T.labels.fontcolors.length>0?T.labels.fontcolors:null;if(R==Q.ID){if(!V){Q._configs.legendInvalid=true}Q._configs.legendColors=Y;Q.coordinates.draw=X.coordinate}var bd=!T.radius||!LChart.Methods.IsNumber(T.radius)?X.maxRadius:T.radius;var be=Q._configs.specificConfig[R];if(!Q.coordinates.radar){Q.coordinates.radar={}}Q.coordinates.radar[R]={radius:bd,centerX:X.centerX,centerY:X.centerY,nodes:[],labels:[],staff:[]};Q.shapes[R]={nodes:[],labels:[]};var bf=Q.shapes[R];var bg=T.radar.nodelength||LChart.Methods.CapValue((X.coordinate.maxX-X.coordinate.minX)/150,10,6);var bh=T.startDirection||'n';var bi=bh=='e'?0:(bh=='s'?Math.PI/2:(bh=='w'?Math.PI:-Math.PI/2));var bj=V?S[0].value.length:S.length;var bk=Math.PI*2/bj;var bl=function(a){return(a-W.minvalue)/(W.maxvalue-W.minvalue)};var bm=function(d,f,g,h,i){this.index=d;this.centerX=f;this.centerY=g;this.isHovered=false;this.nodelength=h;this.data=i;this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(T.click||null);if(a){a(this.data,e)}};if(T.tip.show&&typeof T.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.centerX+bg+5;var b=this.centerY-bg-10;this.tip=Q._createTip(T.tip.content.call(T,this.data,false),a,b);if(this.centerX+this.tip.clientWidth>X.coordinate.maxX){Q._changeTip(this.tip,a-5-bg-this.tip.clientWidth)}var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};var bn=function(a,b,c,d){var e=T.radar;var f=(V?c.color:null)||Y[d%Y.length];var g=(V?c.linecolor:null)||Z[d%Z.length];var h=(V?c.linewidth:null)||e.linewidth||1;var j=[];for(var i=0;i<(V?c.value.length:c.length);i++){var k=V?c:c[i];var l=V?c.value[i]:k.value;var m=k.nodefillcolor||ba[d%ba.length];var n=k.nodelinecolor||bb[d%bb.length];var o=k.nodelinewidth||e.nodelinewidth||0;var p=k.nodelength||bg;var q=k.nodetype||e.nodetype||'c';var r=a*bd*bl(l);var s=bi+i*bk;var t=X.centerX+r*Math.cos(s);var u=X.centerY+r*Math.sin(s);j.push([t,u,m,n,o,p,q]);if(b){var v={value:l,click:k.click,mouseover:k.mouseover,mouseleave:k.mouseleave};v.text=V?c.text:'';v.label=V?(T.labels.labels?T.labels.labels[i%T.labels.labels.length]:''):k.text;var w=new bm(V?d*c.value.length+i:i,t,u,p,v);bf.nodes.push(w)}}Q.DrawFigures.createCloseFigure(j,f,h,g);for(var i=0,point;point=j[i];i++){Q.DrawFigures.createPointElement(point[6],point[0],point[1],point[5],point[2],true,point[3],point[4],true,true);if(b){var x={centerX:point[0],centerY:point[1],length:point[5]};if(V){if(!Q.coordinates.radar[R].nodes[d]){Q.coordinates.radar[R].nodes[d]=[]}Q.coordinates.radar[R].nodes[d][i]=x}else{Q.coordinates.radar[R].nodes[i]=x}}}};var bo=function(g){var h=T.scale;var j=h.linewidth;if(!(h.linewidth>0)){return}var l=T.labels;var m=l.labels||[];if(!V){for(var i=0,item;item=S[i];i++){m[i]=item.text||' '}}var n=l.fontsize||bd/8;var o=h.linecolor||T.lineColor||'rgb(190,190,190)';var p=0.1;var q=5;for(var k=0;k<bj;k++){var r=bi+k*bk;var s=r+bk;var t=0;var u=0;for(var v=W.minvalue+W.interval;v<=W.maxvalue;v+=W.interval){var w=bd*bl(v);t=X.centerX+w*Math.cos(r);u=X.centerY+w*Math.sin(r);var x=X.centerX+w*Math.cos(s);var y=X.centerY+w*Math.sin(s);Q.DrawFigures.createLine(t,u,x,y,j,o)}Q.DrawFigures.createLine(X.centerX,X.centerY,t,u,j,o);var z=LChart.Methods.JudgeBetweenAngle(-Math.PI*0.5,Math.PI*0.5,r);var A=LChart.Methods.JudgeBetweenAngle(-Math.PI,0,r);var B=LChart.Methods.JudgeBetweenAngle(-Math.PI/2-p,-Math.PI/2+p,r)||LChart.Methods.JudgeBetweenAngle(Math.PI/2-p,Math.PI/2+p,r);var C=LChart.Methods.JudgeBetweenAngle(Math.PI-p,Math.PI+p,r)||LChart.Methods.JudgeBetweenAngle(-p,p,r);var D=t;var E=u;if(!B){if(z){D+=q+q*Math.abs(Math.sin(r))}else{D-=q+q*Math.abs(Math.sin(r))}if(C){E+=n/3}else{if(A){E-=q*Math.abs(Math.cos(r))}else{E+=n/2+q*Math.abs(Math.cos(r))}}}else{if(A){E-=n*0.7}else{E+=n}}var F=(bc?bc[k%bc.length]:null)||o;var G=Q.DrawFigures.createText(m[k],D,E,B?'center':(z?'left':'right'),l.fontweight,n,l.fontfamily,F);if(g){var H={index:k,centerX:(B?D:(z?D+G/2:D-G/2)),centerY:E-n/2,size:n,length:G};bf.labels.push(H);Q.coordinates.radar[R].labels.push({index:k,text:m[k],left:H.centerX-G/2,right:H.centerX+G/2,top:E-n,bottom:E,size:n,length:G})}}var I=T.staff;var J=I.content;if(!I.show||typeof J!='function'){return}var K=I.fontsize||bd/W.scalecount*0.8;var L=I.backcolor;var M=0;if(L){for(var v=W.minvalue+W.interval;v<=W.maxvalue;v+=W.interval){var N=Q.DrawFigures.measureText(J(v),I.fontweight,K,I.fontfamily);M=Math.max(M,N)}}var O=function(a,b,c){var d=(b=='n'||b=='s')?X.centerX:(b=='w'?X.centerX-c:X.centerX+c);var e=(b=='w'||b=='e')?X.centerY+K/2.5:(b=='n'?X.centerY-c+K/2.5:X.centerY+c+K/2.5);if(L){Q.DrawFigures.createRectangleFill(d-M/2-1,e-K+1,M+2,K+2,L)}var f=Q.DrawFigures.createText(a,d,e,'center',I.fontweight,K,I.fontfamily,F);if(g){Q.coordinates.radar[R].staff.push({text:a,left:d-f/2,right:d+f/2,top:e-K,bottom:e,size:n,length:f})}};for(var v=W.minvalue+W.interval;v<=W.maxvalue;v+=W.interval){var F=I.fontcolor||'#000000';var P=bd*bl(v);O(J(v),bh,P)}};var bp=function(){bq(1,0)};var bq=function(a,b){var c=b>=1;if(!T.scaleOverlay){bo(c)}if(V){for(var i=0,data;data=S[i];i++){bn(a,c,data,i)}}else{bn(a,c,S,0)}if(T.scaleOverlay){bo(c)}};var br=function(){var h=function(x,y){var a=null;for(var i=bf.nodes.length-1;i>=0;i--){var b=bf.nodes[i];if(Math.sqrt(Math.pow(x-b.centerX,2)+Math.pow(y-b.centerY,2))<=b.nodelength/2){a=b;break}}return a};var j=function(x,y){var a=null;for(var i=bf.labels.length-1;i>=0;i--){var b=bf.labels[i];if(Math.abs(x-b.centerX)<b.length/2&&Math.abs(y-b.centerY)<b.size/2){a=b;break}}return a};var k=function(e){var e=window.event||e;var a=Q._getMouseLoction(e);var b=h(a.X,a.Y);if(b){b.click(e)}};var l=function(e){var e=window.event||e;var a=Q._getMouseLoction(e);var b=h(a.X,a.Y)||j(a.X,a.Y);if(b&&(b.data||T.labels.showtips)){Q._configs.cursorPointer=true}if(be.currentMouseShape!=b){var c=be.currentMouseShape;if(c&&c.data){var d=typeof c.data.mouseleave=='function'?c.data.mouseleave:(T.mouseleave||null);if(d){d(c.data,e)}}be.currentMouseShape=b;for(var i=0,c;c=bf.nodes[i];i++){if(c!=b&&c.isHovered){c.isHovered=false;if(c.hideTip){c.hideTip()}}}if(b){if(b.data){b.isHovered=true;if(b.showTip){b.showTip()}var f=typeof b.data.mouseover=='function'?b.data.mouseover:(T.mouseover||null);if(f){f(b.data,e)}}else{if(T.labels.showtips){var g=b.index;for(var i=bf.nodes.length-1;i>=0;i--){var c=bf.nodes[i];if(c.index%bj==g&&c.showTip){c.isHovered=true;c.showTip()}}}}}}};Q._addEventListener('click',k);Q._addEventListener('mousemove',l)};return{drawSegments:bq,mouseEvents:br,redraw:bp}};