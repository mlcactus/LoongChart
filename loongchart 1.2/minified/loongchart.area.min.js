if(!window.LChart){throw new Error('未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n'+'Not loaded loongchart.core.js which must be loaded before other LChart\'s js.');}else{LChart.Const.Skins.BlackAndWhite.Area={NodeLineColor:'#ffffff',AlignlineLineColor:null}}LChart.Area=LChart.getCore().__extends({GraphType:'Area'});LChart.Area._spreadSkin=function(a,b){a.node={};a.alignline={};a.node.linecolor=b.NodeLineColor||null;a.alignline.linecolor=b.AlignlineLineColor||null};LChart.Area._getDefaultOptions=function(e){var f=LChart.Methods.Extend(e,{invertAxis:false,area:{linecolors:null,linewidth:null,smoothline:false,fillcolors:null},labelAxis:{valueType:null,content:function(a){if(this.valueType=='d'){return a.format('yyyy-MM-dd')}else if(this.valueType=='t'){return a.format('MM-dd hh:mm')}else if(this.valueType=='m'){return a.format('hh:mm:ss.S')}else{return a.toString()}},minvalue:null,maxvalue:null,interval:null,sort:true},valueAxis:{heap:false},node:{show:true,nodetype:null,linecolor:null,linewidth:null,length:null,fillcolor:null},tip:{merge:false,spotdistance:10,content:function(a,b){if(b){var c='<div>';for(var i=0;i<a.length;i++){var d=this.valueType=='p'?a[i].vpercent.toFixed(2)+'%':a[i].vvalue.toString();c+=(i>0?'<br/>':'')+a[i].text+" : "+d}c+='&nbsp;</div>';return c}else{var d=this.valueType=='p'?a.vpercent.toFixed(2)+'%':a.vvalue.toString();if(this.valueType=='d'){d=a.vvalue.format('yyyy-MM-dd')}else if(this.valueType=='t'){d=a.vvalue.format('MM-dd hh:mm')}else if(this.valueType=='m'){d=a.vvalue.format('hh:mm:ss.S')}return'<div>&nbsp;'+(a.text?a.text+'：':'')+d+'&nbsp;</div>'}}},alignline:{verticalline:true,horizontalline:true,linecolor:null},scale:{drawvertical:true}});return f};LChart.Area._getCheckOptions=function(){return{__top:[['invertAxis','b']],area:[['linecolors','ca'],['linewidth','n'],['fillcolors','ca']],labelAxis:[['valueType','s'],['content','f'],['interval','n'],['sort','b']],valueAxis:[['heap','b']],node:[['show','b'],['nodetype','s'],['linecolor','c'],['linewidth','n'],['length','n'],['fillcolor','c']],tip:[['merge','b'],['spotdistance','n']],alignline:[['verticalline','b'],['horizontalline','b'],['linecolor','c']],scale:[['drawvertical','b']]}};LChart.Area._drawgraphic=function(G,H,I,J){G._configs.recreateAssists=true;var K=J.invertAxis;var L=H==G.ID;if(L){G._configs.invertAxis=K;if(J.labelAxis.valueType=='p'){throw new Error(G._messages.WrongParam+G._messages.LabelAxisValueTypeCannotBePercent);}}var M=G._configs.specificConfig[H];var N=G._formatAxisData(J.valueAxis.heap);if(N.tuftCount<2){throw new Error(G._messages.WrongData+G._messages.NeedLeastTwoPoints);}var O=G._calculateOutersValid();var P=G._computeAxis(O);var Q=G._getDrawableCoordinate();var R=J.labelAxis.valueType;var S=N.vValueType=='p';var T=N.heapCompute;var U=J.area.smoothline;var V=U?G.DrawFigures.createSmoothLine:G.DrawFigures.createPointsLine;if(T){M.heaps=[];for(var i=0;i<N.tuftCount;i++){M.heaps[i]=[];var W=0;for(var k=0;k<N.demanCount;k++){var X=I[k];var Y=X.value[i];var Z=S?X.percent[i]:(R?Y[1]:Y);W+=Z;M.heaps[i][k]=W}W=0}}if(!G.coordinates.area){G.coordinates.area={}}G.coordinates.area[H]={nodes:[]};G.shapes[H]={nodes:[]};var ba=LChart.Methods.IsNumber(J.tip.spotdistance)&&J.tip.spotdistance>0?J.tip.spotdistance:10;var bb=J.alignline.linecolor||LChart.Const.Defaults.AlignLineColor;var bc=(J.area.fillcolors&&J.area.fillcolors.length>0?J.area.fillcolors:null)||LChart.Const.Defaults.TransparentColors;var bd=(J.area.linecolors&&J.area.linecolors.length>0?J.area.linecolors:null)||LChart.Const.Defaults.FillColors;if(L){G.coordinates.draw=Q;G._configs.legendColors=bd}M.mergeTips=[];var be={};var bf=(K?P.maxX-P.minX:P.maxY-P.minY);var bg=(K?P.maxY-P.minY:P.maxX-P.minX);var bh=J.node.length||LChart.Methods.CapValue(bg/100,10,6);var bi=function(d,f,g,h,i){this.index=d;this.centerX=f;this.centerY=g;this.isHovered=false;this.nodelength=h;this.data=i;this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(J.click||null);if(a){a(this.data,e)}};if(J.tip.show&&typeof J.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.centerX+bh+5;var b=this.centerY-bh-10;this.tip=G._createTip(J.tip.content.call(J,this.data,false),a,b);if(this.centerX+this.tip.clientWidth>P.maxX){G._changeTip(this.tip,a-5-bh-this.tip.clientWidth)}var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};var bj=function(x,y,a,b){var c=J.node;if(c.show){var d=b.nodelength||bh;var e=b.nodetype||c.nodetype||'c';var f=b.nodelinecolor||c.linecolor||a;var g=b.nodelinewidth||c.linewidth;var h=b.nodefillcolor||c.fillcolor||a;G.DrawFigures.createPointElement(e,x,y,d,h,true,f,g,true,true)}};var bk=function(a,b,c){var d=a.__copy();for(var i=b.length-1;i>=0;i--){d.push(b[i])}G.DrawFigures.createCloseFigure(d,c,0,null,U,K)};var bl=function(m,n){var o=function(a){var b=(J.animation?m:1)*bf*G._getFormatDiff(N.vValueType,N.vMinValue,a)/G._getFormatDiff(N.vValueType,N.vMinValue,N.vMaxValue);return b};var p=function(a){if(R){return bg*G._getFormatDiff(N.lValueType,N.lMinValue,a)/G._getFormatDiff(N.lValueType,N.lMinValue,N.lMaxValue)}else{if(N.multiple){return bg*a/(N.tuftCount-1)}else{return P.labelDistance*a}}};var q=function(i,a,x,y,b,c,d,e,f,g,h,j){if(n>=1){var k={vvalue:c,lvalue:d,text:e};if(f!=null){k.vpercent=f}if(typeof g=='function'){k.click=g}if(typeof h=='function'){k.mouseover=h}if(typeof j=='function'){k.mouseleave=j}var l=new bi(a,x,y,b,k);G.shapes[H].nodes.push(l);if(i>=0){G.coordinates.area[H].nodes[i][a]={centerX:x,centerY:y,length:b}}else{G.coordinates.area[H].nodes[a]={centerX:x,centerY:y,length:b}}}};var r,Z,vpercent,center1,center2;if(N.multiple){var s=[];var t=[];var u=[];for(var i=0,X;X=I[i];i++){var v=X.linewidth||J.area.linewidth||LChart.Const.Defaults.LineWidth;var w=X.color||bd[i%bd.length];var z=bc[i%bc.length];var A=X.text||'';if(n>=1){G.coordinates.area[H].nodes[i]=[]}var B=X.value.length;for(var k=0;k<B;k++){Y=X.value[k];r=R?Y[0]:k;Z=R?Y[1]:Y;vpercent=S?X.percent[k]:null;center1=(K?P.maxY-p(r):P.minX+p(r));var C=o(T?M.heaps[k][i]:(S?vpercent:Z));center2=K?P.minX+C:P.maxY-C;if(k==0){s.push(K?[P.minX,center1]:[center1,P.maxY])}s.push(K?[center2,center1]:[center1,center2]);if(k==B-1){s.push(K?[P.minX,center1]:[center1,P.maxY])}q(i,k,K?center2:center1,K?center1:center2,X.nodelength||bh,Z,r,A,vpercent,X.click,X.mouseover,X.mouseleave)}var D=s.slice(1,s.length-1);if(T&&i>0){bk(D,t,z)}else{G.DrawFigures.createCloseFigure(s,z,0,null,U,K)}var E={linepoints:D,points:s,fillcolor:z,linewidth:v,linecolor:w,nodetype:X.nodetype,nodelength:X.nodelength,nodelinecolor:X.nodelinecolor,nodelinewidth:X.nodelinewidth,nodefillcolor:X.nodefillcolor};u.push(E);if(n>=1){if(!be.areainfos){be.areainfos=[]}be.areainfos[i]=E}t=D.__copy();s=[]}for(var i=0;i<u.length;i++){var D=u[i].linepoints;V(D,u[i].linewidth,u[i].linecolor,K);for(var j=0;j<D.length;j++){var F=D[j];bj(F[0],F[1],u[i].linecolor,u[i])}}}else{var v=J.area.linewidth||LChart.Const.Defaults.LineWidth;var w=bd[0];var z=bc[0];var s=[];var B=I.length;for(var i=0;i<B;i++){Y=I[i];var A=Y.text||'';r=R?Y.value[0]:i;Z=R?Y.value[1]:Y.value;vpercent=S?I[i].percent:null;center1=K?P.maxY-p(r):P.minX+p(r);center2=K?P.minX+o(S?vpercent:Z):P.maxY-o(S?vpercent:Z);if(i==0){s.push(K?[P.minX,center1]:[center1,P.maxY])}s.push(K?[center2,center1]:[center1,center2]);if(i==B-1){s.push(K?[P.minX,center1]:[center1,P.maxY])}q(-1,i,K?center2:center1,K?center1:center2,Y.nodelength||bh,Z,r,A,vpercent,Y.click,Y.mouseover,Y.mouseleave)}if(n>=1){be.points=s;be.linewidth=v;be.linecolor=w;be.fillcolor=z}G.DrawFigures.createCloseFigure(s,z,0,null,U,K);var D=s.slice(1,s.length-1);V(D,v,w,K);for(var j=0;j<D.length;j++){var F=D[j];bj(F[0],F[1],w,I[j])}}};var bm=function(){var p=function(x,y){var a=null;for(var i=G.shapes[H].nodes.length-1;i>=0;i--){var b=G.shapes[H].nodes[i];if(Math.sqrt(Math.pow(x-b.centerX,2)+Math.pow(y-b.centerY,2))<=b.nodelength/2){a=b;break}}return a};var q=function(x,y){var a=[];var b=0;if(y<=P.maxY&&y>=P.minY&&x>=P.minX&&x<=P.maxX){var c=-1;var d=bg/(N.tuftCount-1);var e=(K?P.maxY:P.minX);var f=(K?y:x);for(var i=1;i<N.tuftCount;i++){var g=e+(K?-i*d:(i-1)*d);var h=e+(K?-(i-1)*d:i*d);if(g<=f&&h>=f){var j=Math.abs(g-f);var k=Math.abs(h-f);if(j<ba&&j<=k){c=K?i:i-1;b=g}else if(k<ba&&k<=j){c=K?i-1:i;b=h}break}}for(var i=0,shape;shape=G.shapes[H].nodes[i];i++){if(shape.index==c){a.push(shape)}}}return{shapes:a,loc:b}};var r=function(e){var e=window.event||e;var a=G._getMouseLoction(e);var b=p(a.X,a.Y);if(b){b.click(e)}};var s=function(e){var e=window.event||e;var a=G._getMouseLoction(e);var b=N.lValueType||!N.multiple;var c=p(a.X,a.Y);if(c){G._configs.cursorPointer=true}if(M.currentMouseShape!=c){var d=M.currentMouseShape;if(d){var f=typeof d.data.mouseleave=='function'?d.data.mouseleave:(J.mouseleave||null);if(f){f(d.data,e)}}M.currentMouseShape=c;for(var i=0,d;d=G.shapes[H].nodes[i];i++){if(d!=c&&d.isHovered){d.isHovered=false;if(b&&d.hideTip){d.hideTip()}}}if(c){c.isHovered=true;if(J.alignline.verticalline||J.alignline.horizontalline){G.redrawAll()}if(J.alignline.verticalline){G.DrawFigures.createLine(c.centerX,P.minY,c.centerX,P.maxY+1,1,bb)}if(J.alignline.horizontalline){G.DrawFigures.createLine(P.minX,c.centerY,P.maxX,c.centerY,1,bb)}if(c.showTip&&b){c.showTip()}var g=typeof c.data.mouseover=='function'?c.data.mouseover:(J.mouseover||null);if(g){g(c.data,e)}}else{if(b&&(J.alignline.verticalline||J.alignline.horizontalline)){G.redrawAll()}}}if(!b){var h=q(a.X,a.Y);if(M.loc!=h.loc){M.loc=h.loc;if(J.tip.merge){for(var i=0;i<M.mergeTips.length;i++){if(M.mergeTips[i]){M.mergeTips[i].style.display='none'}}}else{for(var i=0,d;d=G.shapes[H].nodes[i];i++){if(d.hideTip){d.hideTip()}}}if(K&&J.alignline.horizontalline||!K&&J.alignline.verticalline){G.redrawAll()}if(h.shapes.length){if(!K&&J.alignline.verticalline){G.DrawFigures.createLine(h.loc,P.minY,h.loc,P.maxY+1,1,bb)}if(K&&J.alignline.horizontalline){G.DrawFigures.createLine(P.minX,h.loc,P.maxX,h.loc,1,bb)}if(J.tip.merge){if(h.shapes[0].showTip){var j=M.mergeTips[h.shapes[0].index];if(!j){var k=[];var l=0;var m=0;for(var i=0,d;d=h.shapes[i];i++){k.push(d.data);m+=d.centerY;l+=d.centerX}var n=l/h.shapes.length+5;var o=m/h.shapes.length;j=G._createTip(J.tip.content.call(J,k,true),n,o);G._changeTip(j,null,o-j.clientHeight/2+10);if(n+j.clientWidth>P.maxX){G._changeTip(j,n-5-bh-j.clientWidth)}M.mergeTips[h.shapes[0].index]=j}j.style.display='inline'}}else{for(var i=0,d;d=h.shapes[i];i++){if(d.showTip){d.showTip()}}}}}}};G._addEventListener('click',r);G._addEventListener('mousemove',s)};var bn=function(){if(N.multiple){var a=be.areainfos;for(var i=0;i<a.length;i++){var b=a[i].points;var c=b.slice(1,b.length-1);if(T&&i>0){bk(c,d,a[i].fillcolor)}else{G.DrawFigures.createCloseFigure(b,a[i].fillcolor,0,null,U,K)}var d=c.__copy()}for(var i=0;i<a.length;i++){var b=a[i].points;var c=b.slice(1,b.length-1);V(c,a[i].linewidth,a[i].linecolor,K);for(var j=0;j<c.length;j++){bj(c[j][0],c[j][1],a[i].linecolor,a[i])}}}else{var b=be.points;G.DrawFigures.createCloseFigure(b,be.fillcolor,0,null,U,K);var c=b.slice(1,b.length-1);V(c,be.linewidth,be.linecolor,K);for(var j=0;j<c.length;j++){bj(c[j][0],c[j][1],be.linecolor,I[j])}}};return{drawSegments:bl,mouseEvents:bm,redraw:bn}};