window.dcharttools=window.lcharttools={};lcharttools.canvasConfigs={defaultLineColor:'#CCCCCC',defaultLineWidth:1,defaultFontFamily:'微软雅黑',defaultFontSize:14,defaultFontColor:'#000000'};lcharttools.funcs={};lcharttools.funcs._getMouseLoction=function(e){if(e.offsetX!=null){return{X:e.offsetX,Y:e.offsetY}}else{var c=function(a){var b={x:0,y:0};while(a){b.x+=a.offsetLeft;b.y+=a.offsetTop;a=a.offsetParent}return b};var d=e.target;if(d.offsetLeft==undefined){d=d.parentNode}var f=c(d);var g={x:window.pageXOffset+e.clientX,y:window.pageYOffset+e.clientY};return{X:g.x-f.x,Y:g.y-f.y}}};lcharttools.funcs._judgeNormalObject=function(a){return a&&typeof a=='object'&&!(Object.prototype.toString.call(a)==='[object Array]')&&!(typeof a=='object'&&a.constructor==Date)};lcharttools.funcs._deepCopy=function(e){var f={};var g=function(a,b,c){backupPath=c;for(var d in b){c+=d+'.';if(lcharttools.funcs._judgeNormalObject(b[d])){a[d]={};g(a[d],b[d],c)}else{if(b.hasOwnProperty(d)){a[d]=b[d]}}c=backupPath}};g(f,e,'');return f};lcharttools.funcs._override=function(f,g,h){var i=lcharttools.funcs._deepCopy(f);var j=function(a,b,c){var d=c;for(var e in b){c+=e+'.';if(a[e]!==undefined&&b.hasOwnProperty(e)){if(lcharttools.funcs._judgeNormalObject(b[e])&&lcharttools.funcs._judgeNormalObject(a[e])){j(a[e],b[e],c)}else if(!h||b[e]!=null){a[e]=b[e]}}c=d}};j(i,g,'');return i};lcharttools.funcs._formatLinePosition=function(b,x,y){var b=Math.ceil(b);var c=function(a){var i=Math.floor(a);if(b%2==0){return a-i>0.5?i+1:i}else{return i+0.5}};if(arguments.length==3){return{x:c(x),y:c(y)}}else{return c(x)}};lcharttools.funcs._curveSmoothPoints=function(a,b,c,d){var e=(b[0]+c[0])/2;var f=(b[1]+c[1])/2;if(d){a.quadraticCurveTo(b[0],0.5*f+0.5*b[1],e,f);a.quadraticCurveTo(c[0],0.5*f+0.5*c[1],c[0],c[1])}else{a.quadraticCurveTo(0.5*e+0.5*b[0],b[1],e,f);a.quadraticCurveTo(0.5*e+0.5*c[0],c[1],c[0],c[1])}};lcharttools.funcs._setShadow=function(a,b){if(b){if(b.color){a.shadowColor=b.color}if(b.blur){a.shadowBlur=b.blur}if(b.offsetX){a.shadowOffsetX=b.offsetX}if(b.offsetY){a.shadowOffsetY=b.offsetY}}};lcharttools.createArc=function(a,b,c,d,e,f,g,h,i,j,k){if(arguments.length<4){return}h=h||0;i=i||Math.PI*2;a.save();a.beginPath();a.arc(b,c,d,h,i);if(k&&Math.abs(i-h)<Math.PI*2-0.0001){a.lineTo(b,c)}a.closePath();lcharttools.funcs._setShadow(a,j);if(e>0){a.strokeStyle=f||lcharttools.canvasConfigs.defaultLineColor;a.lineWidth=e;a.stroke()}if(g){a.fillStyle=g;a.fill()}a.restore()};lcharttools.createRing=function(a,b,c,d,e,f,g,h,i,j){a.save();a.beginPath();a.moveTo(b+e*Math.cos(g),c+e*Math.sin(g));a.arc(b,c,e,g,h);a.lineTo(b+d*Math.cos(h),c+d*Math.sin(h));a.arc(b,c,d,h,g,true);a.closePath();if(f){a.fillStyle=f;a.fill()}if(i>0){a.lineWidth=i;a.strokeStyle=j||lcharttools.canvasConfigs.defaultLineColor;a.stroke()}a.restore()};lcharttools.measureText=function(a,b,c,d,e){a.save();a.font=(c||'normal')+' '+(d||lcharttools.canvasConfigs.defaultFontSize)+'px '+(e||lcharttools.canvasConfigs.defaultFontFamily);var f=a.measureText(b).width;a.restore();return f};lcharttools.createText=function(a,b,x,y,c,d,e,f,g,h){a.save();a.textAlign=c||'left';a.font=(d||'normal')+' '+(e||lcharttools.canvasConfigs.defaultFontSize)+'px '+(f||lcharttools.canvasConfigs.defaultFontFamily);var i=a.measureText(b).width;a.fillStyle=g||lcharttools.canvasConfigs.defaultFontColor;if(h){a.translate(x,y);a.rotate(h);a.fillText(b,0,0)}else{a.fillText(b,x,y)}a.restore();return i};lcharttools.createRect=function(a,b,c,d,e,f,g,h,i){if(d<=0||e<=0){return}a.save();lcharttools.funcs._setShadow(a,i);a.beginPath();a.rect(b,c,d,e);a.closePath();if(f){a.fillStyle=f;a.fill()}if(g>0){a.lineWidth=g;a.strokeStyle=h||lcharttools.canvasConfigs.defaultLineColor;a.stroke()}a.restore()};lcharttools.createLine=function(a,b,c,d,e,f,g){var f=Math.ceil(f);if(b==d){b=d=lcharttools.funcs._formatLinePosition(f,b)}else if(c==e){c=e=lcharttools.funcs._formatLinePosition(f,c)}a.save();a.beginPath();a.moveTo(b,c);a.lineTo(d,e);a.lineWidth=f||lcharttools.canvasConfigs.defaultLineWidth;a.strokeStyle=g||lcharttools.canvasConfigs.defaultLineColor;a.stroke();a.restore()};lcharttools.createPointsLine=function(a,b,c,d,e,f){var g=b.length;if(g<3){return}a.save();a.lineWidth=c||lcharttools.canvasConfigs.defaultLineWidth;a.strokeStyle=d||lcharttools.canvasConfigs.defaultLineColor;a.beginPath();a.moveTo(b[0][0],b[0][1]);for(var i=0;i<g-1;i++){if(!e){a.lineTo(b[i+1][0],b[i+1][1])}else{lcharttools.funcs._curveSmoothPoints(a,b[i],b[i+1],f)}}a.stroke();a.restore()};lcharttools.createCloseFigure=function(a,b,c,d,e,f,g,h){a.save();a.beginPath();var j=b.length;lcharttools.funcs._setShadow(a,h);a.moveTo(b[0][0],b[0][1]);for(var i=0;i<j-1;i++){if(!f){a.lineTo(b[i+1][0],b[i+1][1])}else{lcharttools.funcs._curveSmoothPoints(a,b[i],b[i+1],g)}}a.closePath();if(c){a.fillStyle=c;a.fill()}if(d>0){a.lineWidth=d;a.strokeStyle=e||lcharttools.canvasConfigs.defaultLineColor;a.stroke()}a.restore()};