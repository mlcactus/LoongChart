if(!window.LChart){throw new Error('未能加载loongchart.core.js，该js必须在其他LChart框架的js加载之前被引用。\n'+'Not loaded loongchart.core.js which must be loaded before other LChart\'s js.');}else{LChart.Const.Skins.BlackAndWhite.Line={NodeLineColor:'#ffffff',AlignlineLineColor:null}}LChart.Line=LChart.getCore().__extends({GraphType:'Line'});LChart.Line._spreadSkin=function(a,b){a.node={};a.alignline={};a.node.linecolor=b.NodeLineColor||null;a.alignline.linecolor=b.AlignlineLineColor||null};LChart.Line._getDefaultOptions=function(e){var f=LChart.Methods.Extend(e,{invertAxis:false,line:{colors:null,linewidth:null,smoothline:false},labelAxis:{valueType:null,content:function(a){if(this.valueType=='d'){return a.format('yyyy-MM-dd')}else if(this.valueType=='t'){return a.format('MM-dd hh:mm')}else if(this.valueType=='m'){return a.format('hh:mm:ss.S')}else{return a.toString()}},minvalue:null,maxvalue:null,interval:null,sort:true},node:{show:true,nodetype:null,linecolor:null,linewidth:null,length:null,fillcolor:null},tip:{merge:false,spotdistance:10,content:function(a,b){if(b){var c='<div>';for(var i=0;i<a.length;i++){var d=this.valueType=='p'?a[i].vpercent.toFixed(2)+'%':a[i].vvalue.toString();c+=(i>0?'<br/>':'')+a[i].text+" : "+d}c+='&nbsp;</div>';return c}else{var d=this.valueType=='p'?a.vpercent.toFixed(2)+'%':a.vvalue.toString();if(this.valueType=='d'){d=a.vvalue.format('yyyy-MM-dd')}else if(this.valueType=='t'){d=a.vvalue.format('MM-dd hh:mm')}else if(this.valueType=='m'){d=a.vvalue.format('hh:mm:ss.S')}return'<div>&nbsp;'+(a.text?a.text+'：':'')+d+'&nbsp;</div>'}}},alignline:{verticalline:true,horizontalline:true,linecolor:null},scale:{drawvertical:true}});return f};LChart.Line._getCheckOptions=function(){return{__top:[['invertAxis','b']],line:[['colors','ca'],['linewidth','n'],['smoothline','b']],labelAxis:[['valueType','s'],['content','f'],['interval','n'],['sort','b']],node:[['show','b'],['nodetype','s'],['linecolor','c'],['linewidth','n'],['length','n'],['fillcolor','c']],tip:[['merge','b'],['spotdistance','n']],alignline:[['verticalline','b'],['horizontalline','b'],['linecolor','c']],scale:[['drawvertical','b']]}};LChart.Line._drawgraphic=function(C,D,E,F){C._configs.recreateAssists=true;var G=F.invertAxis;var H=D==C.ID;if(H){C._configs.invertAxis=G;if(F.labelAxis.valueType=='p'){throw new Error(C._messages.WrongParam+C._messages.LabelAxisValueTypeCannotBePercent);}}var I=C._formatAxisData();if(I.tuftCount<2){throw new Error(C._messages.WrongData+C._messages.NeedLeastTwoPoints);}var J=C._calculateOutersValid();var K=C._computeAxis(J);var L=C._getDrawableCoordinate();if(!C.coordinates.nodes){C.coordinates.nodes={}}C.coordinates.nodes[D]={nodes:[]};C.shapes[D]={nodes:[]};var M=F.labelAxis.valueType;var N=I.vValueType=='p';var O=LChart.Methods.IsNumber(F.tip.spotdistance)&&F.tip.spotdistance>0?F.tip.spotdistance:10;var P=F.alignline.linecolor||LChart.Const.Defaults.AlignLineColor;var Q=(F.line.colors&&F.line.colors.length>0?F.line.colors:null)||LChart.Const.Defaults.FillColors;if(H){C.coordinates.draw=L;C._configs.legendColors=Q}var R={};var S=C._configs.specificConfig[D];var T=C._configs.pointsPosition;S.mergeTips=[];var U=(G?K.maxX-K.minX:K.maxY-K.minY);var V=(G?K.maxY-K.minY:K.maxX-K.minX);var W=F.node.length||LChart.Methods.CapValue(V/100,10,6);var X=F.line.smoothline?C.DrawFigures.createSmoothLine:C.DrawFigures.createPointsLine;var Y=function(d,f,g,h,i){this.index=d;this.centerX=f;this.centerY=g;this.isHovered=false;this.data=i;this.nodelength=h;this.click=function(e){var a=typeof this.data.click=='function'?this.data.click:(F.click||null);if(a){a(this.data,e)}};if(F.tip.show&&typeof F.tip.content=='function'){this.tip=null;this.showTip=function(){if(this.tip){this.tip.style.display='inline'}else{var a=this.centerX+W+5;var b=this.centerY-W-10;this.tip=C._createTip(F.tip.content.call(F,this.data,false),a,b);if(this.centerX+this.tip.clientWidth>K.maxX){C._changeTip(this.tip,a-5-W-this.tip.clientWidth)}var c=this;c.tip.onclick=function(e){c.click(e)}}};this.hideTip=function(){if(this.tip){this.tip.style.display='none'}}}};var Z=function(x,y,a,b){var c=F.node;if(c.show){var d=b.nodelength||W;var e=b.nodetype||c.nodetype||'c';var f=b.nodelinecolor||c.linecolor||a;var g=b.nodelinewidth||c.linewidth;var h=b.nodefillcolor||c.fillcolor||a;C.DrawFigures.createPointElement(e,x,y,d,h,true,f,g,true,true)}};var ba=function(m,n){var o=function(a){var b=(F.animation?m:1)*U*C._getFormatDiff(I.vValueType,I.vMinValue,a)/C._getFormatDiff(I.vValueType,I.vMinValue,I.vMaxValue);return b};var p=function(a){if(M){return V*C._getFormatDiff(I.lValueType,I.lMinValue,a)/C._getFormatDiff(I.lValueType,I.lMinValue,I.lMaxValue)}else{if(I.multiple){return V*a/(I.tuftCount-1)}else{if(H){return V*a/(E.length-1)}else{return K.labelDistance*a}}}};var q=function(i,a,x,y,b,c,d,e,f,g,h,j){if(n>=1){var k={vvalue:c,lvalue:d,text:e};if(f!=null){k.vpercent=f}if(typeof g=='function'){k.click=g}if(typeof h=='function'){k.mouseover=h}if(typeof j=='function'){k.mouseleave=j}var l=new Y(a,x,y,b,k);C.shapes[D].nodes.push(l);if(i>=0){C.coordinates.nodes[D].nodes[i][a]={centerX:x,centerY:y,length:b}}else{C.coordinates.nodes[D].nodes[a]={centerX:x,centerY:y,length:b}}}};var r,vvalue,vpercent,center1,center2;if(I.multiple){var s=[];for(var i=0,item;item=E[i];i++){var t=[];var u=item.linewidth||F.line.linewidth||LChart.Const.Defaults.LineWidth;var v=item.color||Q[i%Q.length];var w=item.text||'';if(n>=1){C.coordinates.nodes[D].nodes[i]=[]}var z=item.value.length;for(var k=0;k<z;k++){subitem=item.value[k];r=M?subitem[0]:k;vvalue=M?subitem[1]:subitem;vpercent=N?item.percent[k]:null;center2=G?K.minX+o(N?vpercent:vvalue):K.maxY-o(N?vpercent:vvalue);if(T){center1=T[i]+(G?-T.labelDistance*k:T.labelDistance*k)}else{center1=(G?K.maxY-p(r):K.minX+p(r))}t.push(G?[center2,center1]:[center1,center2]);q(i,k,G?center2:center1,G?center1:center2,item.nodelength||W,vvalue,r,w,vpercent,item.click,item.mouseover,item.mouseleave)}var A={points:t,linewidth:u,linecolor:v,nodetype:item.nodetype,nodelength:item.nodelength,nodelinecolor:item.nodelinecolor,nodelinewidth:item.nodelinewidth,nodefillcolor:item.nodefillcolor};s.push(A);if(n>=1){if(!R.nodeinfos){R.nodeinfos=[]}R.nodeinfos[i]=A}}for(var i=0;i<s.length;i++){var t=s[i].points;X(t,s[i].linewidth,s[i].linecolor,G);for(var j=0;j<t.length;j++){var B=t[j];Z(B[0],B[1],s[i].linecolor,s[i])}}}else{var u=F.line.linewidth||LChart.Const.Defaults.LineWidth;var v=Q[0];var t=[];var z=E.length;for(var i=0;i<z;i++){subitem=E[i];var w=subitem.text||'';r=M?subitem.value[0]:i;vvalue=M?subitem.value[1]:subitem.value;vpercent=N?E[i].percent:null;center1=H?(G?K.maxY-p(r):K.minX+p(r)):K.startPos+(G?-p(r):p(r));center2=G?K.minX+o(N?vpercent:vvalue):K.maxY-o(N?vpercent:vvalue);t.push(G?[center2,center1]:[center1,center2]);q(-1,i,G?center2:center1,G?center1:center2,subitem.nodelength||W,vvalue,r,w,vpercent,subitem.click,subitem.mouseover,subitem.mouseleave)}if(n>=1){R.points=t;R.linewidth=u;R.linecolor=v}X(t,u,v,G);for(var j=0;j<t.length;j++){var B=t[j];Z(B[0],B[1],v,E[j])}}};var bb=function(){var p=function(x,y){var a=null;for(var i=C.shapes[D].nodes.length-1;i>=0;i--){var b=C.shapes[D].nodes[i];if(Math.sqrt(Math.pow(x-b.centerX,2)+Math.pow(y-b.centerY,2))<=b.nodelength/2){a=b;break}}return a};var q=function(x,y){var a=[];var b=0;if(y<=K.maxY&&y>=K.minY&&x>=K.minX&&x<=K.maxX){var c=-1;var d=V/(I.tuftCount-1);var e=(G?K.maxY:K.minX);var f=(G?y:x);for(var i=1;i<I.tuftCount;i++){var g=e+(G?-i*d:(i-1)*d);var h=e+(G?-(i-1)*d:i*d);if(g<=f&&h>=f){var j=Math.abs(g-f);var k=Math.abs(h-f);if(j<O&&j<=k){c=G?i:i-1;b=g}else if(k<O&&k<=j){c=G?i-1:i;b=h}break}}for(var i=0,shape;shape=C.shapes[D].nodes[i];i++){if(shape.index==c){a.push(shape)}}}return{shapes:a,loc:b}};var r=function(e){var e=window.event||e;var a=C._getMouseLoction(e);var b=p(a.X,a.Y);if(b){b.click(e)}};var s=function(e){var e=window.event||e;var a=C._getMouseLoction(e);var b=T||I.lValueType||!I.multiple;var c=p(a.X,a.Y);if(c){C._configs.cursorPointer=true}if(S.currentMouseShape!=c){var d=S.currentMouseShape;if(d){var f=typeof d.data.mouseleave=='function'?d.data.mouseleave:(F.mouseleave||null);if(f){f(d.data,e)}}S.currentMouseShape=c;for(var i=0,d;d=C.shapes[D].nodes[i];i++){if(d!=c&&d.isHovered){d.isHovered=false;if(b&&d.hideTip){d.hideTip()}}}if(c){c.isHovered=true;if(F.alignline.verticalline||F.alignline.horizontalline){C.redrawAll()}if(F.alignline.verticalline){C.DrawFigures.createLine(c.centerX,K.minY,c.centerX,K.maxY+1,1,P)}if(F.alignline.horizontalline){C.DrawFigures.createLine(K.minX,c.centerY,K.maxX,c.centerY,1,P)}if(c.showTip&&b){c.showTip()}var g=typeof c.data.mouseover=='function'?c.data.mouseover:(F.mouseover||null);if(g){g(c.data,e)}}else{if(b&&(F.alignline.verticalline||F.alignline.horizontalline)){C.redrawAll()}}}if(!b){var h=q(a.X,a.Y);if(C.loc!=h.loc){C.loc=h.loc;if(F.tip.merge){for(var i=0;i<S.mergeTips.length;i++){if(S.mergeTips[i]){S.mergeTips[i].style.display='none'}}}else{for(var i=0,d;d=C.shapes[D].nodes[i];i++){if(d.hideTip){d.hideTip()}}}if(G&&F.alignline.horizontalline||!G&&F.alignline.verticalline){C.redrawAll()}if(h.shapes.length){if(!G&&F.alignline.verticalline){C.DrawFigures.createLine(h.loc,K.minY,h.loc,K.maxY+1,1,P)}if(G&&F.alignline.horizontalline){C.DrawFigures.createLine(K.minX,h.loc,K.maxX,h.loc,1,P)}if(F.tip.merge){if(h.shapes[0].showTip){var j=S.mergeTips[h.shapes[0].index];if(!j){var k=[];var l=0;var m=0;for(var i=0,d;d=h.shapes[i];i++){k.push(d.data);m+=d.centerY;l+=d.centerX}var n=l/h.shapes.length+5;var o=m/h.shapes.length;j=C._createTip(F.tip.content.call(F,k,true),n,o);C._changeTip(j,null,o-j.clientHeight/2+10);if(n+j.clientWidth>K.maxX){C._changeTip(j,n-5-W-j.clientWidth)}S.mergeTips[h.shapes[0].index]=j}j.style.display='inline'}}else{for(var i=0,d;d=h.shapes[i];i++){if(d.showTip){d.showTip()}}}}}}};C._addEventListener('click',r);C._addEventListener('mousemove',s)};var bc=function(){if(I.multiple){for(var i=0;i<R.nodeinfos.length;i++){var a=R.nodeinfos[i].points;X(a,R.nodeinfos[i].linewidth,R.nodeinfos[i].linecolor,G);for(var j=0;j<a.length;j++){Z(a[j][0],a[j][1],R.nodeinfos[i].linecolor,R.nodeinfos[i])}}}else{var a=R.points;X(a,R.linewidth,R.linecolor,G);for(var j=0;j<a.length;j++){Z(a[j][0],a[j][1],R.linecolor,E[j])}}};return{drawSegments:ba,mouseEvents:bb,redraw:bc}};